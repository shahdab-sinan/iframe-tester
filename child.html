<!DOCTYPE html>
<html>
<head>
  <title>Iframe Content</title>
  <style>
    body {
      margin: 0;
      padding: 10px;
      font-family: sans-serif;
    }
  </style>
</head>
<body >
  <div class="video-container">
    <iframe width="440" height="248" src="https://www.youtube.com/embed/cpZWwxJpEYA?rel=0" frameborder="0"></iframe>
  </div>
  <h3>Iframe Content</h3>
  <p>This content is inside the iframe...</p>
  <p>Click below to add more content</p>
  <button onclick="addContent()">Add Content</button>
  <div id="extraContent"></div>

  <script>
   const allowedDomains = [
  ".nhs.uhs.uk",
  ".uhs.nhs.uk"
];
function postToParent(message) {
  const ref = document.referrer;

    // If referrer missing (iOS Safari), skip domain check
    if (!ref) {
     window.parent.postMessage(message, "*");
     return; 
    }

    const url = new URL(ref);
    const hostname = url.hostname;
    const origin = url.origin;

    const isAllowed = allowedDomains.some(domain =>
      hostname.endsWith(domain)
    );

    if (isAllowed) {
        window.parent.postMessage(message, origin);
    }
}

  function sendHeightToParent() { 
    const height = document.body.scrollHeight; 
    postToParent({ messageType: "adjust-height", iframeHeight: height}); 
  }

  function extendParentSession() { 
    postToParent({ messageType: "extend-session" }); 
    }   
    
    window.addEventListener("load", () => { 
    sendHeightToParent(); 
    // Set up session extension every 60 seconds 
    setInterval(extendParentSession, 60000); 
  }); 

  window.addEventListener("resize", sendHeightToParent); 
  </script>
</body>
</html>












